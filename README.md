@ -0,0 +1,38 @@import React, { useEffect, useState } from 'react'import API from './api/api'import MenuList from './components/MenuList'import Cart from './components/Cart'import OrderTracker from './components/OrderTracker'import AdminDashboard from './components/AdminDashboard'import io from 'socket.io-client'const socket = io(import.meta.env.VITE_API_WS || 'http://localhost:5000');export default function App(){  const [meals,setMeals] = useState([])  const [cart,setCart] = useState([])  const [orders,setOrders] = useState([])  useEffect(()=>{ API.get('/meals').then(r=>setMeals(r.data)).catch(console.error) },[])  useEffect(()=>{    socket.on('order-updated', updated => {      // update local orders if any      setOrders(prev => prev.map(o => o._id === updated._id ? updated : o))    })    socket.on('new-order', o => console.log('new-order', o))    return ()=>{ socket.off('order-updated'); socket.off('new-order') }  },[])  return (    <div className="app">      <header><h1>Campus Smart Eats</h1></header>      <main>        <MenuList meals={meals} addToCart={(m)=>setCart(c=>[...c,{...m, qty:1}])} />        <Cart cart={cart} setCart={setCart} setOrders={setOrders} />        <OrderTracker orders={orders} />        <AdminDashboard />      </main>    </div>  )}
Collapse file: Meal.js‎Meal.js‎Copy file name to clipboard+10Lines changed: 10 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,10 @@const mongoose = require('mongoose');const mealSchema = new mongoose.Schema({  name: String,  description: String,  price: Number,  image: String,  available: { type: Boolean, default: true },  tags: [String]}, { timestamps: true });module.exports = mongoose.model('Meal', mealSchema);
Collapse file: Order.js‎Order.js‎Copy file name to clipboard+10Lines changed: 10 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,10 @@const mongoose = require('mongoose');const orderSchema = new mongoose.Schema({  user: { type: mongoose.Schema.Types.ObjectId, ref: 'User' },  items: [{ meal: { type: mongoose.Schema.Types.ObjectId, ref: 'Meal' }, qty: Number, price: Number }],  total: Number,  status: { type: String, enum: ['Preparing','Ready','Completed','Cancelled'], default: 'Preparing' },  payment: { provider: String, paid: { type: Boolean, default: false }, paymentId: String },  pickupAt: Date}, { timestamps: true });module.exports = mongoose.model('Order', orderSchema);
Collapse file: User.js‎User.js‎Copy file name to clipboard+8Lines changed: 8 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,8 @@const mongoose = require('mongoose');const userSchema = new mongoose.Schema({  name: String,  email: { type: String, unique: true },  password: String, // hashed  role: { type: String, enum: ['student','teacher','visitor','admin'], default: 'student' }}, { timestamps: true });module.exports = mongoose.model('User', userSchema);
Collapse file: api.js‎api.js‎Copy file name to clipboard+3Lines changed: 3 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,3 @@import axios from 'axios';const API = axios.create({ baseURL: import.meta.env.VITE_API_URL || 'http://localhost:5000/api' });export default API;
Collapse file: auth.js‎auth.js‎Copy file name to clipboard+29Lines changed: 29 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,29 @@const express = require('express');const bcrypt = require('bcryptjs');const jwt = require('jsonwebtoken');const User = require('../models/User');const router = express.Router();router.post('/register', async (req, res) => {  try {    const { name, email, password, role } = req.body;    const hashed = await bcrypt.hash(password, 10);    const u = new User({ name, email, password: hashed, role });    await u.save();    res.json({ ok: true });  } catch (e) { res.status(400).json({ error: e.message }); }});router.post('/login', async (req, res) => {  try {    const { email, password } = req.body;    const u = await User.findOne({ email });    if (!u) return res.status(401).json({ error: 'Invalid' });    const match = await bcrypt.compare(password, u.password);    if (!match) return res.status(401).json({ error: 'Invalid' });    const token = jwt.sign({ id: u._id, role: u.role }, process.env.JWT_SECRET, { expiresIn: '7d' });    res.json({ token, user: { name: u.name, email: u.email, role: u.role } });  } catch (e) { res.status(500).json({ error: e.message }); }});module.exports = router;
Collapse file: backend/package.json‎backend/package.json‎Copy file name to clipboard+22Lines changed: 22 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,22 @@{  "name": "campus-smart-eats-backend",  "version": "1.0.0",  "main": "src/index.js",  "scripts": {    "start": "node src/index.js",    "dev": "nodemon src/index.js"  },  "dependencies": {    "bcryptjs": "^2.4.3",    "cors": "^2.8.5",    "dotenv": "^16.0.0",    "express": "^4.18.2",    "jsonwebtoken": "^9.0.0",    "mongoose": "^7.0.0",    "razorpay": "^2.8.0",    "socket.io": "^4.7.0"  },  "devDependencies": {    "nodemon": "^2.0.0"  }}
Collapse file: backend/src/index.js‎backend/src/index.js‎Copy file name to clipboard+42Lines changed: 42 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,42 @@require('dotenv').config();const express = require('express');const http = require('http');const cors = require('cors');const mongoose = require('mongoose');const { Server } = require('socket.io');const authRoutes = require('./routes/auth');const mealsRoutes = require('./routes/meals');const ordersRoutes = require('./routes/orders');const app = express();const server = http.createServer(app);const io = new Server(server, {  cors: { origin: process.env.FRONTEND_URL || '*' }});app.use(cors({ origin: process.env.FRONTEND_URL || '*' }));app.use(express.json());app.use('/api/auth', authRoutes);app.use('/api/meals', mealsRoutes);app.use('/api/orders', ordersRoutes);// make io available in reqapp.use((req, res, next) => { req.io = io; next(); });const PORT = process.env.PORT || 5000;mongoose.connect(process.env.MONGO_URI, { useNewUrlParser: true, useUnifiedTopology: true })  .then(() => {    console.log('MongoDB connected');    server.listen(PORT, () => console.log(`Server running on port ${PORT}`));  })  .catch(err => console.error(err));// basic Socket.IO connectionio.on('connection', (socket) => {  console.log('socket connected:', socket.id);  socket.on('join-admin', () => socket.join('admins'));  socket.on('disconnect', () => console.log('socket disconnected', socket.id));});
Collapse file: backend/src/models/Meal.js‎backend/src/models/Meal.js‎Copy file name to clipboard+10Lines changed: 10 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,10 @@const mongoose = require('mongoose');const mealSchema = new mongoose.Schema({  name: String,  description: String,  price: Number,  image: String,  available: { type: Boolean, default: true },  tags: [String]}, { timestamps: true });module.exports = mongoose.model('Meal', mealSchema);
Collapse file: backend/src/models/Order.js‎backend/src/models/Order.js‎Copy file name to clipboard+10Lines changed: 10 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,10 @@const mongoose = require('mongoose');const orderSchema = new mongoose.Schema({  user: { type: mongoose.Schema.Types.ObjectId, ref: 'User' },  items: [{ meal: { type: mongoose.Schema.Types.ObjectId, ref: 'Meal' }, qty: Number, price: Number }],  total: Number,  status: { type: String, enum: ['Preparing','Ready','Completed','Cancelled'], default: 'Preparing' },  payment: { provider: String, paid: { type: Boolean, default: false }, paymentId: String },  pickupAt: Date}, { timestamps: true });module.exports = mongoose.model('Order', orderSchema);
Collapse file: backend/src/models/User.js‎backend/src/models/User.js‎Copy file name to clipboard+8Lines changed: 8 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,8 @@const mongoose = require('mongoose');const userSchema = new mongoose.Schema({  name: String,  email: { type: String, unique: true },  password: String, // hashed  role: { type: String, enum: ['student','teacher','visitor','admin'], default: 'student' }}, { timestamps: true });module.exports = mongoose.model('User', userSchema);
Collapse file: backend/src/routes/auth.js‎backend/src/routes/auth.js‎Copy file name to clipboard+29Lines changed: 29 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,29 @@const express = require('express');const bcrypt = require('bcryptjs');const jwt = require('jsonwebtoken');const User = require('../models/User');const router = express.Router();router.post('/register', async (req, res) => {  try {    const { name, email, password, role } = req.body;    const hashed = await bcrypt.hash(password, 10);    const u = new User({ name, email, password: hashed, role });    await u.save();    res.json({ ok: true });  } catch (e) { res.status(400).json({ error: e.message }); }});router.post('/login', async (req, res) => {  try {    const { email, password } = req.body;    const u = await User.findOne({ email });    if (!u) return res.status(401).json({ error: 'Invalid' });    const match = await bcrypt.compare(password, u.password);    if (!match) return res.status(401).json({ error: 'Invalid' });    const token = jwt.sign({ id: u._id, role: u.role }, process.env.JWT_SECRET, { expiresIn: '7d' });    res.json({ token, user: { name: u.name, email: u.email, role: u.role } });  } catch (e) { res.status(500).json({ error: e.message }); }});module.exports = router;
Collapse file: backend/src/routes/meals.js‎backend/src/routes/meals.js‎Copy file name to clipboard+28Lines changed: 28 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,28 @@const express = require('express');const Meal = require('../models/Meal');const router = express.Router();router.get('/', async (req, res) => {  const meals = await Meal.find().sort({ createdAt: -1 });  res.json(meals);});router.post('/', async (req, res) => {  // admin only — minimal check, extend in production  const { name, description, price, image, tags } = req.body;  const m = new Meal({ name, description, price, image, tags });  await m.save();  res.json(m);});router.put('/:id', async (req, res) => {  const m = await Meal.findByIdAndUpdate(req.params.id, req.body, { new: true });  res.json(m);});router.delete('/:id', async (req, res) => {  await Meal.findByIdAndDelete(req.params.id);  res.json({ ok: true });});module.exports = router;
Collapse file: backend/src/routes/orders.js‎backend/src/routes/orders.js‎Copy file name to clipboard+48Lines changed: 48 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,48 @@const express = require('express');const Order = require('../models/Order');const router = express.Router();const Razorpay = require('razorpay');// create orderrouter.post('/', async (req, res) => {  try {    const { user, items, total, payment } = req.body; // payment: { provider }    const order = new Order({ user, items, total, payment });    await order.save();    // notify admin channel via socket    req.io.to('admins').emit('new-order', order);    res.json(order);  } catch (e) { res.status(500).json({ error: e.message }); }});// admin updates order statusrouter.put('/:id/status', async (req, res) => {  const { status } = req.body;  const o = await Order.findByIdAndUpdate(req.params.id, { status }, { new: true });  // emit to clients  req.io.emit('order-updated', o);  res.json(o);});// list ordersrouter.get('/', async (req, res) => {  const { userId } = req.query;  const q = userId ? { user: userId } : {};  const orders = await Order.find(q).populate('items.meal').sort({ createdAt: -1 });  res.json(orders);});// Razorpay order creation (server-side) - minimal examplerouter.post('/razorpay/create', async (req, res) => {  const Razorpay = require('razorpay');  const rzp = new Razorpay({ key_id: process.env.RAZORPAY_KEY_ID, key_secret: process.env.RAZORPAY_KEY_SECRET });  const { amount, currency, receipt } = req.body; // amount in paise  try {    const resp = await rzp.orders.create({ amount, currency: currency || 'INR', receipt });    res.json(resp);  } catch (e) { res.status(500).json({ error: e.message }); }});module.exports = router;
Collapse file: frontend/package.json‎frontend/package.json‎Copy file name to clipboard+20Lines changed: 20 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,20 @@{  "name": "campus-smart-eats-frontend",  "private": true,  "version": "1.0.0",  "scripts": {    "dev": "vite",    "build": "vite build",    "preview": "vite preview"  },  "dependencies": {    "axios": "^1.4.0",    "react": "^18.2.0",    "react-dom": "^18.2.0",    "socket.io-client": "^4.7.0"  },  "devDependencies": {    "@vitejs/plugin-react": "^4.0.0",    "vite": "^5.0.0"  }}
Collapse file: frontend/public/manifest.json‎frontend/public/manifest.json‎Copy file name to clipboard+12Lines changed: 12 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,12 @@{  "name": "Campus Smart Eats",  "short_name": "SmartEats",  "start_url": "/",  "display": "standalone",  "background_color": "#ffffff",  "theme_color": "#ff6b6b",  "icons": [    { "src": "/icons/icon-192.png", "sizes": "192x192", "type": "image/png" },    { "src": "/icons/icon-512.png", "sizes": "512x512", "type": "image/png" }  ]}
Collapse file: frontend/public/sw.js‎frontend/public/sw.js‎Copy file name to clipboard+13Lines changed: 13 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,13 @@const CACHE = 'campus-smart-eats-v1';const toCache = [ '/', '/index.html', '/manifest.json' ];self.addEventListener('install', (e) => { e.waitUntil(caches.open(CACHE).then(c => c.addAll(toCache))); });self.addEventListener('activate', (e) => { e.waitUntil(self.clients.claim()); });self.addEventListener('fetch', (e) => {  e.respondWith(caches.match(e.request).then(r => r || fetch(e.request)));});// simple push notification handlerself.addEventListener('push', event => {  const data = event.data?.json() || { title: 'Campus Smart Eats', body: 'You have a notification' };  event.waitUntil(self.registration.showNotification(data.title, { body: data.body }));});
Collapse file: frontend/src/App.jsx‎frontend/src/App.jsx‎Copy file name to clipboard+38Lines changed: 38 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,38 @@import React, { useEffect, useState } from 'react'import API from './api/api'import MenuList from './components/MenuList'import Cart from './components/Cart'import OrderTracker from './components/OrderTracker'import AdminDashboard from './components/AdminDashboard'import io from 'socket.io-client'const socket = io(import.meta.env.VITE_API_WS || 'http://localhost:5000');export default function App(){  const [meals,setMeals] = useState([])  const [cart,setCart] = useState([])  const [orders,setOrders] = useState([])  useEffect(()=>{ API.get('/meals').then(r=>setMeals(r.data)).catch(console.error) },[])  useEffect(()=>{    socket.on('order-updated', updated => {      // update local orders if any      setOrders(prev => prev.map(o => o._id === updated._id ? updated : o))    })    socket.on('new-order', o => console.log('new-order', o))    return ()=>{ socket.off('order-updated'); socket.off('new-order') }  },[])  return (    <div className="app">      <header><h1>Campus Smart Eats</h1></header>      <main>        <MenuList meals={meals} addToCart={(m)=>setCart(c=>[...c,{...m, qty:1}])} />        <Cart cart={cart} setCart={setCart} setOrders={setOrders} />        <OrderTracker orders={orders} />        <AdminDashboard />      </main>    </div>  )}
Collapse file: frontend/src/api/api.js‎frontend/src/api/api.js‎Copy file name to clipboard+3Lines changed: 3 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,3 @@import axios from 'axios';const API = axios.create({ baseURL: import.meta.env.VITE_API_URL || 'http://localhost:5000/api' });export default API;
Collapse file: frontend/src/main.jsx‎frontend/src/main.jsx‎Copy file name to clipboard+11Lines changed: 11 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,11 @@import React from 'react'import { createRoot } from 'react-dom/client'import App from './App'import './styles.css'createRoot(document.getElementById('root')).render(<App />)// register service worker (simple)if ('serviceWorker' in navigator) {  navigator.serviceWorker.register('/sw.js').catch(e => console.warn('SW failed', e));}
Collapse file: index.js‎index.js‎Copy file name to clipboard+42Lines changed: 42 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,42 @@require('dotenv').config();const express = require('express');const http = require('http');const cors = require('cors');const mongoose = require('mongoose');const { Server } = require('socket.io');const authRoutes = require('./routes/auth');const mealsRoutes = require('./routes/meals');const ordersRoutes = require('./routes/orders');const app = express();const server = http.createServer(app);const io = new Server(server, {  cors: { origin: process.env.FRONTEND_URL || '*' }});app.use(cors({ origin: process.env.FRONTEND_URL || '*' }));app.use(express.json());app.use('/api/auth', authRoutes);app.use('/api/meals', mealsRoutes);app.use('/api/orders', ordersRoutes);// make io available in reqapp.use((req, res, next) => { req.io = io; next(); });const PORT = process.env.PORT || 5000;mongoose.connect(process.env.MONGO_URI, { useNewUrlParser: true, useUnifiedTopology: true })  .then(() => {    console.log('MongoDB connected');    server.listen(PORT, () => console.log(`Server running on port ${PORT}`));  })  .catch(err => console.error(err));// basic Socket.IO connectionio.on('connection', (socket) => {  console.log('socket connected:', socket.id);  socket.on('join-admin', () => socket.join('admins'));  socket.on('disconnect', () => console.log('socket disconnected', socket.id));});
Collapse file: main.jsx‎main.jsx‎Copy file name to clipboard+11Lines changed: 11 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,11 @@import React from 'react'import { createRoot } from 'react-dom/client'import App from './App'import './styles.css'createRoot(document.getElementById('root')).render(<App />)// register service worker (simple)if ('serviceWorker' in navigator) {  navigator.serviceWorker.register('/sw.js').catch(e => console.warn('SW failed', e));}
Collapse file: manifest.json‎manifest.json‎Copy file name to clipboard+12Lines changed: 12 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,12 @@{  "name": "Campus Smart Eats",  "short_name": "SmartEats",  "start_url": "/",  "display": "standalone",  "background_color": "#ffffff",  "theme_color": "#ff6b6b",  "icons": [    { "src": "/icons/icon-192.png", "sizes": "192x192", "type": "image/png" },    { "src": "/icons/icon-512.png", "sizes": "512x512", "type": "image/png" }  ]}
Collapse file: meals.js‎meals.js‎Copy file name to clipboard+28Lines changed: 28 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,28 @@const express = require('express');const Meal = require('../models/Meal');const router = express.Router();router.get('/', async (req, res) => {  const meals = await Meal.find().sort({ createdAt: -1 });  res.json(meals);});router.post('/', async (req, res) => {  // admin only — minimal check, extend in production  const { name, description, price, image, tags } = req.body;  const m = new Meal({ name, description, price, image, tags });  await m.save();  res.json(m);});router.put('/:id', async (req, res) => {  const m = await Meal.findByIdAndUpdate(req.params.id, req.body, { new: true });  res.json(m);});router.delete('/:id', async (req, res) => {  await Meal.findByIdAndDelete(req.params.id);  res.json({ ok: true });});module.exports = router;
Collapse file: orders.js‎orders.js‎Copy file name to clipboard+48Lines changed: 48 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,48 @@const express = require('express');const Order = require('../models/Order');const router = express.Router();const Razorpay = require('razorpay');// create orderrouter.post('/', async (req, res) => {  try {    const { user, items, total, payment } = req.body; // payment: { provider }    const order = new Order({ user, items, total, payment });    await order.save();    // notify admin channel via socket    req.io.to('admins').emit('new-order', order);    res.json(order);  } catch (e) { res.status(500).json({ error: e.message }); }});// admin updates order statusrouter.put('/:id/status', async (req, res) => {  const { status } = req.body;  const o = await Order.findByIdAndUpdate(req.params.id, { status }, { new: true });  // emit to clients  req.io.emit('order-updated', o);  res.json(o);});// list ordersrouter.get('/', async (req, res) => {  const { userId } = req.query;  const q = userId ? { user: userId } : {};  const orders = await Order.find(q).populate('items.meal').sort({ createdAt: -1 });  res.json(orders);});// Razorpay order creation (server-side) - minimal examplerouter.post('/razorpay/create', async (req, res) => {  const Razorpay = require('razorpay');  const rzp = new Razorpay({ key_id: process.env.RAZORPAY_KEY_ID, key_secret: process.env.RAZORPAY_KEY_SECRET });  const { amount, currency, receipt } = req.body; // amount in paise  try {    const resp = await rzp.orders.create({ amount, currency: currency || 'INR', receipt });    res.json(resp);  } catch (e) { res.status(500).json({ error: e.message }); }});module.exports = router;
Collapse file: package.json‎package.json‎Copy file name to clipboard+20Lines changed: 20 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,20 @@{  "name": "campus-smart-eats-frontend",  "private": true,  "version": "1.0.0",  "scripts": {    "dev": "vite",    "build": "vite build",    "preview": "vite preview"  },  "dependencies": {    "axios": "^1.4.0",    "react": "^18.2.0",    "react-dom": "^18.2.0",    "socket.io-client": "^4.7.0"  },  "devDependencies": {    "@vitejs/plugin-react": "^4.0.0",    "vite": "^5.0.0"  }}
Collapse file: sw.js‎sw.js‎Copy file name to clipboard+13Lines changed: 13 additions & 0 deletionsOriginal file line numberDiff line numberDiff line change@@ -0,0 +1,13 @@const CACHE = 'campus-smart-eats-v1';const toCache = [ '/', '/index.html', '/manifest.json' ];self.addEventListener('install', (e) => { e.waitUntil(caches.open(CACHE).then(c => c.addAll(toCache))); });self.addEventListener('activate', (e) => { e.waitUntil(self.clients.claim()); });self.addEventListener('fetch', (e) => {  e.respondWith(caches.match(e.request).then(r => r || fetch(e.request)));});// simple push notification handlerself.addEventListener('push', event => {  const data = event.data?.json() || { title: 'Campus Smart Eats', body: 'You have a notification' };  event.waitUntil(self.registration.showNotification(data.title, { body: data.body }));});
